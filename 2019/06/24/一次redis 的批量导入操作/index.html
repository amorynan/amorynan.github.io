<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>ä¸€æ¬¡redis çš„æ‰¹é‡å¯¼å…¥æ•°æ®è®°å½• | WelCome to amory's world!</title><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css"><script>var GLOBAL = { 
  root: '/',
  algolia: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script><link rel="icon" href="/favicon.ico"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¸€æ¬¡redis-çš„æ‰¹é‡å¯¼å…¥æ•°æ®è®°å½•"><span class="toc-number">1.</span> <span class="toc-text">ä¸€æ¬¡redis çš„æ‰¹é‡å¯¼å…¥æ•°æ®è®°å½•</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1561376322195&amp;di=968ecdc60b194dac7a024a8e75182703&amp;imgtype=0&amp;src=http%3A%2F%2Fgss0.baidu.com%2F94o3dSag_xI4khGko9WTAnF6hhy%2Fzhidao%2Fpic%2Fitem%2F91529822720e0cf397cc85d40846f21fbe09aae2.jpg"></div><div class="author-info__name text-center">amory wang</div><div class="author-info__description text-center">hey ...</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">10</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">15</span></a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container" style="background-image: url(true)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">WelCome to amory's world!</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span></div><div id="post-info"><div id="post-title">ä¸€æ¬¡redis çš„æ‰¹é‡å¯¼å…¥æ•°æ®è®°å½•</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-06-24 </time></div></div></div><div class="layout" id="content-inner"><article id="post"><div id="post-content"><hr>
<h2 id="ä¸€æ¬¡redis-çš„æ‰¹é‡å¯¼å…¥æ•°æ®è®°å½•"><a href="#ä¸€æ¬¡redis-çš„æ‰¹é‡å¯¼å…¥æ•°æ®è®°å½•" class="headerlink" title="ä¸€æ¬¡redis çš„æ‰¹é‡å¯¼å…¥æ•°æ®è®°å½•"></a>ä¸€æ¬¡redis çš„æ‰¹é‡å¯¼å…¥æ•°æ®è®°å½•</h2><p>èƒŒæ™¯ï¼š ç”±äºredis aliyunå®ä¾‹æ¬ è´¹ï¼Œç°åœ¨æ–°èµ·äº†ä¸€ä¸ªredis çš„å®ä¾‹ï¼Œç„¶åéœ€è¦åˆ†ææ¢å¤å‰é¢ä¸€ä¸ªredis å®ä¾‹çš„æ•°æ®åˆ°æ–°çš„redis å®ä¾‹</p>
<hr>
<p><strong><em>æƒ…å†µäº†è§£</em></strong></p>
<p><strong>first</strong></p>
<p>åˆ†ææƒ³è¦å¹²æˆçš„äº‹æƒ… </p>
<p>ç¬¬ä¸€æ­¥ï¼šæ‰¾å›æ—§redis æ—§æ•°æ®</p>
<p>ç¬¬äºŒéƒ¨ï¼šæ‰¹é‡å¯¼å…¥æ–°redis å®ä¾‹æ•°æ®</p>
<p><strong>second</strong> </p>
<p>ä¸‹æ‰‹ç¬¬ä¸€æ­¥ï¼š</p>
<p>redis åœ¨å…¬å¸çš„é¡¹ç›®ä¸­æ— éä¸¤ä¸ªç”¨é€”ï¼šä¸€æ˜¯å¯¹æ•°æ®åº“æ•°æ®åšç¼“å­˜ï¼›è€Œæ˜¯ä½œä¸ºå†…å­˜æ•°æ®åº“è¿›è¡Œå¿«é€Ÿè¯»å†™æ“ä½œï¼Œé‚£ä¹ˆæˆ‘éœ€è¦æ‰¾åˆ°æ‰€æœ‰ä¼šç”¨åˆ°redis template å®ä¾‹çš„ä»£ç æ®µè¿›è¡Œåˆ†æï¼Œç„¶åå¯¹æ¯”åˆ†æï¼Œéœ€è¦æƒè¡¡å’Œè€ƒè™‘åˆ°çš„å› ç´ æœ‰ï¼š1. å¦‚æœæ˜¯ä½œä¸ºç¼“å­˜ï¼Œé‚£ä¹ˆæ•°æ®åº“è‡ªç„¶æœ‰æ•°æ®ï¼Œå…¶å®è¿™ä¸€éƒ¨åˆ†æ•°æ®å°±æ²¡æœ‰å¿…è¦å†æ¬¡å¯¼å…¥æ–°çš„rediså®ä¾‹ä¸­ï¼Œä»£ä»·ä¹Ÿå°±æ˜¯ç¬¬ä¸€æ¬¡è§¦å‘çš„æ—¶å€™ä¼šæœ‰æ¯”è¾ƒæ…¢ä¸€ç‚¹ï¼›2. å¦‚æœæ˜¯ä½œä¸ºå†…å­˜æ•°æ®åº“çš„éƒ¨åˆ†ï¼Œå…¶å®ä¸€èˆ¬ä¼šæœ‰mysql å¯¹åº”çš„è¡¨çš„åˆ—æ•°æ®çš„ä¾å­˜ï¼Œå¯ä»¥æ‰¾åˆ°ä¸Šä¸‹æ–‡ä¸­çš„service ç„¶ååˆ°å¯¹åº”çš„è¡¨è¿›è¡ŒæŸ¥çœ‹ã€‚å¦‚æœæœ‰ï¼Œå°±å¯ä»¥å¯¼å‡ºç›¸åº”çš„è¡¨ä¸­åˆ—çš„æ•°æ®åˆ°æœ¬åœ°ï¼Œç„¶åé‡‡ç”¨redis pipeçš„æ–¹å¼è¿›è¡Œæ‰¹é‡æ·»åŠ </p>
<p>ä¸‹æ‰‹ç¬¬äºŒæ­¥ï¼š</p>
<p>å› ä¸ºæˆ‘åŸºæœ¬ä¸Šéƒ½å¯ä»¥æ‰¾åˆ°ç›¸åº”çš„æ•°æ®åˆ—åœ¨æ•°æ®åº“è¡¨ä¸­ï¼Œæ‰€ä»¥ä¸Šé¢çš„2ç‚¹å¼€å§‹è¿˜ç®—é¡ºåˆ©ï¼Œä¸‹é¢æœ€ä¸»è¦çš„å°±æ˜¯å¦‚ä½•è¿›è¡Œæ‰¹é‡å¯¼å…¥aliyun redis å®ä¾‹ä¸­</p>
<p><strong>å‰æ</strong></p>
<p>åœ¨è¿™é‡Œæˆ‘å°±ç›´æ¥ä½¿ç”¨çš„redis æœ€ç®€å•çš„pipeçš„æ–¹å¼ï¼Œå¤§æ¦‚éœ€è¦åšçš„å°±æ˜¯æŠŠredis å‘½ä»¤è¡Œçš„set è¯­å¥æ”¾å…¥ä¸€ä¸ªtxtæ–‡ä»¶ï¼Œæœ‰å¤šå°‘æ¡æ•°æ®å°±ä¼šæœ‰å¤šå°‘ä¸ªsetè¯­å¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">set xxx yyy</span><br><span class="line">set zzz ddd</span><br><span class="line">set iii aaa</span><br></pre></td></tr></table></figure>

<p>é‚£å°±ä¼šé‡åˆ°å¦‚ä½•å°†mysqlä¸­çš„æ•°æ®å¯¼å‡ºç„¶ååˆä»¥ä¸Šé¢çš„æ ¼å¼å½¢æˆä¸€ä¸ªtxt æ–‡ä»¶ï¼Œä¹Ÿæ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯æ¯”è¾ƒç¹çï¼Œå…ˆæŠŠmysqlçš„æ•°æ®ä»¥excelå¯¼å‡ºï¼Œç„¶åexcelå¤§æ³•å°±æ¯”è¾ƒå‰å®³äº†ï¼Œå½¢æˆä¸Šé¢çš„æ ¼å¼ä¸ä¼šå¾ˆéš¾ï¼Œæœ€åè¿˜éœ€è¦ä»¥txtæ ¼å¼ä¿å­˜å³å¯ï¼Œä½†ç¹ççš„åœ°æ­¥å°±åœ¨äºå¦‚æœéœ€è¦æ¢å¤çš„redis çš„kvå¯¹çš„ç§ç±»å¾ˆå¤šï¼Œä¹Ÿå°±æ˜¯è¯´éœ€è¦äººå·¥æ“ä½œå¾ˆå¤šæ¬¡å½¢æˆå¾ˆå¤štxtæ‰è¡Œï¼Œä½†æ˜¯ç”±äºè¿™æ¬¡çš„åœºæ™¯æ²¡æœ‰è¾ƒå¤šç§ç±»çš„kv å¯¹ï¼Œå…¶æ¬¡æ˜¯æš‚æ—¶æ²¡æœ‰å¾ˆå¥½çš„æƒ³æ³•ï¼Œæ‰€ä»¥å°±å…ˆè¿™æ ·åšï¼Œåœ¨æœ¬åœ°æœ‰äº†ä¹‹åtxt ä¹‹åï¼Œéœ€è¦ç”¨åˆ°scpå‘½ä»¤å°†txt æ–‡ä»¶ä¸Šä¼ åˆ°ecsä¸Šï¼Œç„¶åé€šè¿‡ecs è¿æ¥ redis å®ä¾‹è¿›è¡Œcat å‘½ä»¤çš„è¯»å–å’Œæ‰§è¡Œå³å¯</p>
<p><strong>å…·ä½“æ“ä½œä¸€æ³¢</strong></p>
<p>å½¢æˆtxt æ–‡ä»¶è¿™ä¸€æ­¥å°±ä¸ç»†è¯´äº†ï¼Œä¸»è¦æ˜¯åé¢çš„éƒ¨åˆ†</p>
<p><em>step1</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨scp å‘½ä»¤å°†txt æ–‡ä»¶ä¸Šä¼ åˆ°çº¿ä¸Šecs æœåŠ¡å™¨ä¸Š</span><br><span class="line">scp xx.txt root@xx.xxx.xxx:~/</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„</strong>ï¼š
è¿™é‡Œä¸ºä»€ä¹ˆæ²¡æœ‰ç›´æ¥ä½¿ç”¨scp ä¸Šä¼ åˆ°redis å®ä¾‹ä¸­ï¼Œæ˜¯å› ä¸ºæˆ‘æœ¬æ¬¡åœºæ™¯ä¸­çš„aliyun redis å®ä¾‹æ²¡æœ‰åœ¨å¯¹åº”çš„ecs ä¸Šè¿›è¡Œé…ç½®å¯å…¬ç½‘è¿æ¥çš„ipï¼Œå½“ç„¶telnet ä¹Ÿå°±ä¸è¡Œï¼Œåªèƒ½é€šè¿‡ä¸Šecs ï¼Œç„¶åé€šè¿‡ecs å®ä¾‹è¿›è¡Œè®¿é—®rediså®ä¾‹ï¼Œå¹¶ä¸”ecs å’Œ redis å®ä¾‹ä¹‹é—´ç½‘ç»œä¹Ÿæ˜¯æœ‰è¦æ±‚çš„ï¼Œå…·ä½“å¯ä»¥çœ‹<a href="https://help.aliyun.com/document_detail/43850.html?spm=a2c4g.11186623.6.573.54711c49VVZuOg" target="_blank" rel="noopener">aliyun rediså…¬ç½‘è®¿é—®è¿æ¥æŒ‡å—</a> </p>
<p><em>step2</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ssh ç™»å…¥å¯ä»¥è®¿é—®çš„redis å®ä¾‹çš„ecs å®ä¾‹</span><br><span class="line">ssh root@xx.xxx.xxx</span><br><span class="line">è¾“å…¥å¯†ç </span><br><span class="line"></span><br><span class="line">ls å‘½ä»¤</span><br><span class="line">å°±å¯ä»¥çœ‹åˆ°å¯¹åº”çš„txt æ–‡ä»¶ï¼Œå› ä¸ºæˆ‘ä¸Šé¢æ˜¯æ”¾åœ¨ï½/ç›®å½•ä¸‹çš„</span><br></pre></td></tr></table></figure>

<p><em>step3</em></p>
<p>ä¸‹é¢å°±æ˜¯ä¸»è¦æ‰¹é‡æ·»åŠ çš„æ–¹å¼ï¼Œ åˆ©ç”¨redis-cli å‘½ä»¤è¡Œçš„æ–¹å¼ï¼Œè®¿é—®redis å®ä¾‹ï¼Œå¹¶ä¸”å°†txt æ•°æ®æ‰¹é‡æ·»åŠ </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//è¿™é‡Œæ˜¯åœ¨ç™»é™†rediså®ä¾‹ -h åé¢åº”è¯¥æ·»åŠ redis å®ä¾‹åç§° ï¼Œ-a åé¢çš„å‚æ•°åº”è¯¥æ˜¯ redis è¿æ¥çš„å¯†ç </span><br><span class="line">redis-cli -h r-xxx.redis.rds.aliyuncs.com -a redispassword</span><br><span class="line">//ğŸ‘†æ‰§è¡ŒæˆåŠŸåä¼šå‡ºç°,é‚£å°±æ˜¯å·²ç»è¿›å…¥rediså®ä¾‹çš„ç«¯å£äº†ï¼Œå¯ä»¥ç›´æ¥è¿›è¡Œæ•°æ®æ“ä½œçš„æ„æ€</span><br><span class="line">r-xxx.redis.rds.aliyuncs.com:6379&gt; </span><br><span class="line">// å½“ç„¶æˆ‘ä»¬æ˜¯æ‰¹é‡çš„txtæ–‡ä»¶ï¼Œé‚£ä¹ˆå¯ä»¥ä¸ç”¨å»ç«¯å£ä¸‹ä¼ è¾“ï¼Œç›´æ¥å¯ä»¥åˆ°ä½ çš„txtæ–‡ä»¶çš„ç›®å½•ä¸‹è¾“å…¥ä¸‹é¢çš„å‘½ä»¤</span><br><span class="line">cat test.txt | redis-cli -h r-xxx.redis.rds.aliyuncs.com -a redispassword --pipe</span><br><span class="line">//ä¹‹åå¦‚æœå‡ºç°ğŸ‘‡æç¤º,é‡ç‚¹çœ‹replies çš„æ•°å­—æ˜¯å¦å’Œä½ çš„setæ•°ä¸€è‡´ï¼Œå¯ä»¥çœ‹å‡ºæ˜¯å¦æ‰¹é‡æˆåŠŸå¯¼å…¥</span><br><span class="line">All data transferred. Waiting for the last reply...</span><br><span class="line">No replies for 30 seconds: exiting.</span><br><span class="line">errors: 1, replies: 4</span><br></pre></td></tr></table></figure>

<p><strong><em>summary</em></strong></p>
<p>å…¶å®æ€»ä½“æ“ä½œä¸‹æ¥ï¼Œæ²¡æœ‰èŠ±å¾ˆå¤šæ—¶é—´ï¼Œä¸»è¦æ—¶é—´éƒ½æ˜¯cat é‚£é‡Œæ‰¹é‡å¯¼å…¥èŠ±è´¹çš„æ—¶é—´æ¯”è¾ƒä¹…ï¼Œä½†æ˜¯è¿™æ˜¯ç”±äºæˆ‘çš„åœºæ™¯ä¸å¤æ‚ä»¥åŠæ•°æ®ä¸æ˜¯å¾ˆå¤šå¯¼è‡´çš„ï¼Œé‡Œé¢å¯ä»¥æ·±æŒ–çš„ç‚¹è¿˜æ˜¯æœ‰å¾ˆå¤šçš„ï¼Œä»¥åæ·±å…¥äº†è§£redisä¹‹åï¼Œæœ‰ä¸ªå¤§èƒ†çš„æƒ³æ³•ï¼Œå†™ä¸€ä¸ªæ’ä»¶ä¹Ÿæ˜¯ä¸é”™çš„é€‰æ‹©ï¼Œæ¯”å¦‚ï¼Œredis çš„å¯¼å…¥å¯ä»¥é™¤äº†ä¸ç”¨pipeçš„æ–¹å¼ï¼Œè¿˜æœ‰å…¶ä»–çš„ï¼Œpipeå’Œå…¶ä»–æ–¹å¼çš„æ—¶é—´ä¼˜ç¼ºç‚¹ï¼Œè¿™å°±æ¶‰åŠåˆ°redis çš„æºç è§£è¯»ï¼Œå…¶æ¬¡æ˜¯ecs è®¾ç½®å¥½å…¬ç½‘è®¿é—®ä¹‹åå¯ä»¥ç›´æ¥æœ¬åœ°è¿æ¥æ‰¹é‡æ“ä½œï¼Œä¸ç”¨scp äº†ç­‰ç­‰ï¼Œå‰æ–¹è·¯è¿˜é•¿ï¼Œkeep goingâ€¦</p>
</div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/å®æ“å·¥ä½œè®°å½•/">å®æ“å·¥ä½œè®°å½•</a><a class="post-meta__tags" href="/tags/redisæ•°æ®æ“ä½œ/">redisæ•°æ®æ“ä½œ</a><a class="post-meta__tags" href="/tags/ecs/">ecs</a><a class="post-meta__tags" href="/tags/rediså®ä¾‹/">rediså®ä¾‹</a></div></article><nav id="pagination"><div class="prev-post pull-left"><a href="/2019/07/03/netstat ä¸‹çš„ä½ äº†è§£å¤šå°‘ï¼Ÿä¸Š/"><i class="fa fa-chevron-left">  </i><span>netstat ä¸‹æŸ¥çœ‹ä½ æŒæ¡å¤šå°‘ç½‘ç»œçŸ¥è¯†?ä¸Š</span></a></div><div class="next-post pull-right"><a href="/2019/06/23/å¹¶å‘ç¼–ç¨‹ä¸€/"><span>å¹¶å‘ç¼–ç¨‹é¢†åŸŸçš„æ¢ç´¢å’Œå®è·µä¹‹è·¯</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="gitment_title" class="gitment_title"></div>
<div id="container" style="display:none"></div>
<link rel="stylesheet" href="https://jjeejj.github.io/css/gitment.css">
<script src="https://jjeejj.github.io/js/gitment.js"></script>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script>
  const myTheme = {
    render(state, instance) {
      const container = document.createElement('div');
      container.lang = "en-US";
      container.className = 'gitment-container gitment-root-container';
      container.appendChild(instance.renderHeader(state, instance));
      container.appendChild(instance.renderEditor(state, instance));
      container.appendChild(instance.renderComments(state, instance));
      container.appendChild(instance.renderFooter(state, instance));
      return container;
    }
  }

  function showGitment() {
    $("#gitment_title").attr("style", "display:none");
    $("#container").attr("style", "").addClass("gitment_container");
    var gitment = new Gitment({
      id: decodeURI(window.location.pathname),
      theme: myTheme,
      owner: 'amorynan',
      repo: 'https://amorynan.github.io/',
      oauth: {
        client_id: 'dd00b7cc5fbce0060c2d',
        client_secret: '9e044107808ba825bdf0990c19c4501de74bdcec'
      }
    });
    gitment.render('container');
  }

  showGitment();
</script>
</div></div><footer><div class="layout" id="footer"><div class="copyright">Â©2013 - 2019 By amory wang</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io"><span>Hexo</span></a><span> |  </span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/js/third-party/anime.min.js"></script><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/fancybox.js"></script><script src="/js/sidebar.js"></script><script src="/js/copy.js"></script><script src="/js/fireworks.js"></script><script src="/js/transition.js"></script><script src="/js/scroll.js"></script><script src="/js/head.js"></script></body></html>